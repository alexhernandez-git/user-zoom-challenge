{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { useSetRecoilState } from \"recoil\";\nimport reposState from \"../state/reposState\";\nvar ESort;\n\n(function (ESort) {\n  ESort[\"CREATED\"] = \"created\";\n  ESort[\"UPDATED\"] = \"updated\";\n  ESort[\"PUBLISHED\"] = \"published\";\n  ESort[\"FULL_NAME\"] = \"full_name\";\n})(ESort || (ESort = {}));\n\nvar EDirection;\n\n(function (EDirection) {\n  EDirection[\"ASC\"] = \"asc\";\n  EDirection[\"DESC\"] = \"desc\";\n})(EDirection || (EDirection = {}));\n\nconst useGetRepos = function () {\n  _s();\n\n  let {\n    results = 8,\n    org = \"facebook\",\n    sort = \"created\",\n    direction = \"asc\"\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const setRepos = useSetRecoilState(reposState);\n  console.log(org);\n  const {\n    isLoading,\n    error,\n    data\n  } = useQuery([\"reposData\", org, results], () => axios.get(`https://api.github.com/orgs/${org}/repos?per_page=${results}?sort=${sort}`, {\n    headers: {\n      Authorization: \"token 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\"\n    }\n  }).then(res => res.data).catch(err => err.response));\n  console.log(data, error);\n  useEffect(() => {\n    if (isLoading) {\n      setRepos(repos => {\n        return { ...repos,\n          loading: true,\n          error: false\n        };\n      });\n    } else {\n      console.log(\"error\", error);\n      if (error) setRepos({\n        results: data,\n        loading: false,\n        error: error\n      });else {\n        setRepos(repos => ({ ...repos,\n          results: data,\n          loading: false,\n          error: null\n        }));\n      }\n    }\n  }, [isLoading]);\n};\n\n_s(useGetRepos, \"25rynwHFMVJuecTAioHeBBPOyRM=\", false, function () {\n  return [useSetRecoilState, useQuery];\n});\n\nexport default useGetRepos;","map":{"version":3,"sources":["/Users/alexhernandezprat/code/user-zoom-challenge/frontend/src/hooks/useGetRepos.ts"],"names":["axios","useEffect","useQuery","useSetRecoilState","reposState","ESort","EDirection","useGetRepos","results","org","sort","direction","setRepos","console","log","isLoading","error","data","get","headers","Authorization","then","res","catch","err","response","repos","loading"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,iBAAT,QAAkC,QAAlC;AACA,OAAOC,UAAP,MAAuB,qBAAvB;IAGKC,K;;WAAAA,K;AAAAA,EAAAA,K;AAAAA,EAAAA,K;AAAAA,EAAAA,K;AAAAA,EAAAA,K;GAAAA,K,KAAAA,K;;IAOAC,U;;WAAAA,U;AAAAA,EAAAA,U;AAAAA,EAAAA,U;GAAAA,U,KAAAA,U;;AAaL,MAAMC,WAAW,GAAG,YAKK;AAAA;;AAAA,MALJ;AACnBC,IAAAA,OAAO,GAAG,CADS;AAEnBC,IAAAA,GAAG,GAAG,UAFa;AAGnBC,IAAAA,IAAI,GAAG,SAHY;AAInBC,IAAAA,SAAS,GAAG;AAJO,GAKI,uEAAP,EAAO;AACvB,QAAMC,QAAQ,GAAGT,iBAAiB,CAACC,UAAD,CAAlC;AACAS,EAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACA,QAAM;AAAEM,IAAAA,SAAF;AAAaC,IAAAA,KAAb;AAAoBC,IAAAA;AAApB,MAA6Bf,QAAQ,CAAC,CAAC,WAAD,EAAcO,GAAd,EAAmBD,OAAnB,CAAD,EAA8B,MACvER,KAAK,CACFkB,GADH,CAEK,+BAA8BT,GAAI,mBAAkBD,OAAQ,SAAQE,IAAK,EAF9E,EAGI;AACES,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAE;AADR;AADX,GAHJ,EASGC,IATH,CASSC,GAAD,IAASA,GAAG,CAACL,IATrB,EAUGM,KAVH,CAUUC,GAAD,IAASA,GAAG,CAACC,QAVtB,CADyC,CAA3C;AAaAZ,EAAAA,OAAO,CAACC,GAAR,CAAYG,IAAZ,EAAkBD,KAAlB;AACAf,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIc,SAAJ,EAAe;AACbH,MAAAA,QAAQ,CAAEc,KAAD,IAAmB;AAC1B,eAAO,EAAE,GAAGA,KAAL;AAAYC,UAAAA,OAAO,EAAE,IAArB;AAA2BX,UAAAA,KAAK,EAAE;AAAlC,SAAP;AACD,OAFO,CAAR;AAGD,KAJD,MAIO;AACLH,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBE,KAArB;AACA,UAAIA,KAAJ,EAAWJ,QAAQ,CAAC;AAAEJ,QAAAA,OAAO,EAAES,IAAX;AAAiBU,QAAAA,OAAO,EAAE,KAA1B;AAAiCX,QAAAA,KAAK,EAAEA;AAAxC,OAAD,CAAR,CAAX,KACK;AACHJ,QAAAA,QAAQ,CAAEc,KAAD,KAAoB,EAC3B,GAAGA,KADwB;AAE3BlB,UAAAA,OAAO,EAAES,IAFkB;AAG3BU,UAAAA,OAAO,EAAE,KAHkB;AAI3BX,UAAAA,KAAK,EAAE;AAJoB,SAApB,CAAD,CAAR;AAMD;AACF;AACF,GAjBQ,EAiBN,CAACD,SAAD,CAjBM,CAAT;AAkBD,CAxCD;;GAAMR,W;UAMaJ,iB,EAEkBD,Q;;;AAkCrC,eAAeK,WAAf","sourcesContent":["import axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { useSetRecoilState } from \"recoil\";\nimport reposState from \"../state/reposState\";\nimport { IRepos } from \"../types\";\n\nenum ESort {\n  CREATED = \"created\",\n  UPDATED = \"updated\",\n  PUBLISHED = \"published\",\n  FULL_NAME = \"full_name\",\n}\n\nenum EDirection {\n  ASC = \"asc\",\n  DESC = \"desc\",\n}\n\ninterface IUseGetRepos {\n  results?: number;\n  page?: number;\n  org?: string;\n  sort?: ESort;\n  direction?: EDirection;\n}\n\nconst useGetRepos = ({\n  results = 8,\n  org = \"facebook\",\n  sort = \"created\",\n  direction = \"asc\",\n}: IUseGetRepos = {}) => {\n  const setRepos = useSetRecoilState(reposState);\n  console.log(org);\n  const { isLoading, error, data } = useQuery([\"reposData\", org, results], () =>\n    axios\n      .get(\n        `https://api.github.com/orgs/${org}/repos?per_page=${results}?sort=${sort}`,\n        {\n          headers: {\n            Authorization: \"token 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\",\n          },\n        }\n      )\n      .then((res) => res.data)\n      .catch((err) => err.response)\n  );\n  console.log(data, error);\n  useEffect(() => {\n    if (isLoading) {\n      setRepos((repos: IRepos) => {\n        return { ...repos, loading: true, error: false };\n      });\n    } else {\n      console.log(\"error\", error);\n      if (error) setRepos({ results: data, loading: false, error: error });\n      else {\n        setRepos((repos: IRepos) => ({\n          ...repos,\n          results: data,\n          loading: false,\n          error: null,\n        }));\n      }\n    }\n  }, [isLoading]);\n};\n\nexport default useGetRepos;\n"]},"metadata":{},"sourceType":"module"}