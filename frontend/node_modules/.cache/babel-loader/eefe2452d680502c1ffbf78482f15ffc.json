{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { useSetRecoilState } from \"recoil\";\nimport orgsState from \"../state/orgsState\";\n\nconst useGetOrgs = function () {\n  _s();\n\n  let {\n    results = 50,\n    user = \"\"\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const setOrgs = useSetRecoilState(orgsState);\n  const {\n    isLoading,\n    error,\n    data\n  } = useQuery([\"orgsData\", user, results], () => axios.get(`https://api.github.com/organizations?per_page=${results}`, {\n    headers: {\n      Authorization: \"token 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\"\n    }\n  }).then(res => res.data).catch(err => err.response));\n  console.log(data, error);\n  useEffect(() => {\n    if (isLoading) {\n      setOrgs(repos => {\n        return { ...repos,\n          loading: true,\n          error: false\n        };\n      });\n    } else {\n      console.log(\"error\", error);\n      if (error) setOrgs({\n        results: data,\n        loading: false,\n        error: error\n      });else {\n        console.log(\"entra\");\n        setOrgs(repos => ({ ...repos,\n          results: [...repos.results, ...data],\n          loading: false,\n          error: null\n        }));\n      }\n    }\n  }, [isLoading]);\n};\n\n_s(useGetOrgs, \"8SglQCOLDmDwrAmUsdP9w0H4qz8=\", false, function () {\n  return [useSetRecoilState, useQuery];\n});\n\nexport default useGetOrgs;","map":{"version":3,"sources":["/Users/alexhernandezprat/code/user-zoom-challenge/frontend/src/hooks/useGetOrgs.ts"],"names":["axios","useEffect","useQuery","useSetRecoilState","orgsState","useGetOrgs","results","user","setOrgs","isLoading","error","data","get","headers","Authorization","then","res","catch","err","response","console","log","repos","loading"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,iBAAT,QAAkC,QAAlC;AACA,OAAOC,SAAP,MAAsB,oBAAtB;;AAQA,MAAMC,UAAU,GAAG,YAAmD;AAAA;;AAAA,MAAlD;AAAEC,IAAAA,OAAO,GAAG,EAAZ;AAAgBC,IAAAA,IAAI,GAAG;AAAvB,GAAkD,uEAAP,EAAO;AACpE,QAAMC,OAAO,GAAGL,iBAAiB,CAACC,SAAD,CAAjC;AAEA,QAAM;AAAEK,IAAAA,SAAF;AAAaC,IAAAA,KAAb;AAAoBC,IAAAA;AAApB,MAA6BT,QAAQ,CAAC,CAAC,UAAD,EAAaK,IAAb,EAAmBD,OAAnB,CAAD,EAA8B,MACvEN,KAAK,CACFY,GADH,CACQ,iDAAgDN,OAAQ,EADhE,EACmE;AAC/DO,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAE;AADR;AADsD,GADnE,EAMGC,IANH,CAMSC,GAAD,IAASA,GAAG,CAACL,IANrB,EAOGM,KAPH,CAOUC,GAAD,IAASA,GAAG,CAACC,QAPtB,CADyC,CAA3C;AAUAC,EAAAA,OAAO,CAACC,GAAR,CAAYV,IAAZ,EAAkBD,KAAlB;AACAT,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIQ,SAAJ,EAAe;AACbD,MAAAA,OAAO,CAAEc,KAAD,IAAkB;AACxB,eAAO,EAAE,GAAGA,KAAL;AAAYC,UAAAA,OAAO,EAAE,IAArB;AAA2Bb,UAAAA,KAAK,EAAE;AAAlC,SAAP;AACD,OAFM,CAAP;AAGD,KAJD,MAIO;AACLU,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBX,KAArB;AACA,UAAIA,KAAJ,EAAWF,OAAO,CAAC;AAAEF,QAAAA,OAAO,EAAEK,IAAX;AAAiBY,QAAAA,OAAO,EAAE,KAA1B;AAAiCb,QAAAA,KAAK,EAAEA;AAAxC,OAAD,CAAP,CAAX,KACK;AACHU,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAb,QAAAA,OAAO,CAAEc,KAAD,KAAmB,EACzB,GAAGA,KADsB;AAEzBhB,UAAAA,OAAO,EAAE,CAAC,GAAGgB,KAAK,CAAChB,OAAV,EAAmB,GAAGK,IAAtB,CAFgB;AAGzBY,UAAAA,OAAO,EAAE,KAHgB;AAIzBb,UAAAA,KAAK,EAAE;AAJkB,SAAnB,CAAD,CAAP;AAMD;AACF;AACF,GAlBQ,EAkBN,CAACD,SAAD,CAlBM,CAAT;AAmBD,CAjCD;;GAAMJ,U;UACYF,iB,EAEmBD,Q;;;AAgCrC,eAAeG,UAAf","sourcesContent":["import axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { useSetRecoilState } from \"recoil\";\nimport orgsState from \"../state/orgsState\";\nimport { IOrgs } from \"../types\";\n\ninterface IUseGetOrgs {\n  results?: number;\n  user?: string;\n}\n\nconst useGetOrgs = ({ results = 50, user = \"\" }: IUseGetOrgs = {}) => {\n  const setOrgs = useSetRecoilState(orgsState);\n\n  const { isLoading, error, data } = useQuery([\"orgsData\", user, results], () =>\n    axios\n      .get(`https://api.github.com/organizations?per_page=${results}`, {\n        headers: {\n          Authorization: \"token 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\",\n        },\n      })\n      .then((res) => res.data)\n      .catch((err) => err.response)\n  );\n  console.log(data, error);\n  useEffect(() => {\n    if (isLoading) {\n      setOrgs((repos: IOrgs) => {\n        return { ...repos, loading: true, error: false };\n      });\n    } else {\n      console.log(\"error\", error);\n      if (error) setOrgs({ results: data, loading: false, error: error });\n      else {\n        console.log(\"entra\");\n        setOrgs((repos: IOrgs) => ({\n          ...repos,\n          results: [...repos.results, ...data],\n          loading: false,\n          error: null,\n        }));\n      }\n    }\n  }, [isLoading]);\n};\n\nexport default useGetOrgs;\n"]},"metadata":{},"sourceType":"module"}