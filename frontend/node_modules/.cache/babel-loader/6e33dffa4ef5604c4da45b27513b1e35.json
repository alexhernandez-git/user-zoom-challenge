{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useMutation } from \"react-query\";\nimport { useSetRecoilState } from \"recoil\";\nimport favouritesState from \"../state/favouritesState\";\n\nconst useRemoveFavourite = favouriteId => {\n  _s();\n\n  const setFavourites = useSetRecoilState(favouritesState);\n  const mutation = useMutation(\"remove mutation\", {\n    mutationFn: () => axios.delete(`http://localhost:8080/api/favourites/${favouriteId}`),\n    onSuccess: (result, variables, context) => {\n      console.log(result, variables, context);\n      setFavourites(favourites => ({\n        results: favourites.results.filter(fav => fav._id !== favouriteId),\n        loading: false,\n        error: null\n      }));\n    },\n    onError: (error, variables, context) => {\n      console.log(error, variables, context);\n      setFavourites(favourites => ({\n        results: favourites.results,\n        loading: false,\n        error: error\n      }));\n    }\n  });\n  return mutation;\n};\n\n_s(useRemoveFavourite, \"2cSshNXyniN0sHbSeWNdIYSL+Ys=\", false, function () {\n  return [useSetRecoilState, useMutation];\n});\n\nexport default useRemoveFavourite;","map":{"version":3,"sources":["/app/src/hooks/useRemoveFavourite.ts"],"names":["axios","useMutation","useSetRecoilState","favouritesState","useRemoveFavourite","favouriteId","setFavourites","mutation","mutationFn","delete","onSuccess","result","variables","context","console","log","favourites","results","filter","fav","_id","loading","error","onError"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,iBAAT,QAAkC,QAAlC;AACA,OAAOC,eAAP,MAA4B,0BAA5B;;AAGA,MAAMC,kBAAkB,GAAIC,WAAD,IAAqC;AAAA;;AAC9D,QAAMC,aAAa,GAAGJ,iBAAiB,CAACC,eAAD,CAAvC;AAEA,QAAMI,QAAQ,GAAGN,WAAW,CAAC,iBAAD,EAAoB;AAC9CO,IAAAA,UAAU,EAAE,MACVR,KAAK,CAACS,MAAN,CAAc,wCAAuCJ,WAAY,EAAjE,CAF4C;AAG9CK,IAAAA,SAAS,EAAE,CAACC,MAAD,EAASC,SAAT,EAAoBC,OAApB,KAAgC;AACzCC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAZ,EAAoBC,SAApB,EAA+BC,OAA/B;AACAP,MAAAA,aAAa,CAAEU,UAAD,KAA8B;AAC1CC,QAAAA,OAAO,EAAED,UAAU,CAACC,OAAX,CAAmBC,MAAnB,CAA2BC,GAAD,IAASA,GAAG,CAACC,GAAJ,KAAYf,WAA/C,CADiC;AAE1CgB,QAAAA,OAAO,EAAE,KAFiC;AAG1CC,QAAAA,KAAK,EAAE;AAHmC,OAA9B,CAAD,CAAb;AAKD,KAV6C;AAW9CC,IAAAA,OAAO,EAAE,CAACD,KAAD,EAAQV,SAAR,EAAmBC,OAAnB,KAA+B;AACtCC,MAAAA,OAAO,CAACC,GAAR,CAAYO,KAAZ,EAAmBV,SAAnB,EAA8BC,OAA9B;AACAP,MAAAA,aAAa,CAAEU,UAAD,KAA8B;AAC1CC,QAAAA,OAAO,EAAED,UAAU,CAACC,OADsB;AAE1CI,QAAAA,OAAO,EAAE,KAFiC;AAG1CC,QAAAA,KAAK,EAAEA;AAHmC,OAA9B,CAAD,CAAb;AAKD;AAlB6C,GAApB,CAA5B;AAoBA,SAAOf,QAAP;AACD,CAxBD;;GAAMH,kB;UACkBF,iB,EAELD,W;;;AAuBnB,eAAeG,kBAAf","sourcesContent":["import axios from \"axios\";\nimport React from \"react\";\nimport { useMutation } from \"react-query\";\nimport { useSetRecoilState } from \"recoil\";\nimport favouritesState from \"../state/favouritesState\";\nimport { IFavourites } from \"../types\";\n\nconst useRemoveFavourite = (favouriteId: string | undefined) => {\n  const setFavourites = useSetRecoilState(favouritesState);\n\n  const mutation = useMutation(\"remove mutation\", {\n    mutationFn: () =>\n      axios.delete(`http://localhost:8080/api/favourites/${favouriteId}`),\n    onSuccess: (result, variables, context) => {\n      console.log(result, variables, context);\n      setFavourites((favourites: IFavourites) => ({\n        results: favourites.results.filter((fav) => fav._id !== favouriteId),\n        loading: false,\n        error: null,\n      }));\n    },\n    onError: (error, variables, context) => {\n      console.log(error, variables, context);\n      setFavourites((favourites: IFavourites) => ({\n        results: favourites.results,\n        loading: false,\n        error: error,\n      }));\n    },\n  });\n  return mutation;\n};\n\nexport default useRemoveFavourite;\n"]},"metadata":{},"sourceType":"module"}